"""Add sample_id column to sample.artifact

Revision ID: 8f3ea520a73e
Revises: 0df207ed67f9
Create Date: 2024-12-01 01:19:42.936762

"""

from typing import Sequence, Union

import sqlalchemy as sa
from alembic import op

# revision identifiers, used by Alembic.
revision: str = "8f3ea520a73e"
down_revision: Union[str, None] = "0df207ed67f9"
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column(
        "artifact", sa.Column("sample_id", sa.Integer(), nullable=True), schema="sample"
    )
    op.create_foreign_key(
        None,
        "artifact",
        "sample",
        ["sample_id"],
        ["id"],
        source_schema="sample",
        referent_schema="sample",
    )
    # ### end Alembic commands ###


def downgrade() -> None:
    raise RuntimeError("Upgrades only")
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_constraint(None, "artifact", schema="sample", type_="foreignkey")
    op.drop_column("artifact", "sample_id", schema="sample")
    # ### end Alembic commands ###
